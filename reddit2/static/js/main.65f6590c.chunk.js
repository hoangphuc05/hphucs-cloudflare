(this["webpackJsonprvn-tool"]=this["webpackJsonprvn-tool"]||[]).push([[0],{14:function(t,e,a){},8:function(t,e,a){t.exports=a(9)},9:function(t,e,a){"use strict";a.r(e);var n,r,l,s,d,o=a(2),i=a(3),c=a(5),h=a(6),m=a(0),u=a.n(m),p=a(4),g=a.n(p),v=a(1),b=a.n(v);a(14);function w(t){var e=document.createElement("textarea");return e.innerHTML=t,0===e.childNodes.length?"":e.childNodes[0].nodeValue}console.log(window.fbid);var _=new Event("input",{bubbles:!0});window.onbeforeunload=function(){return"Save ch\u01b0a b\u1ea1n \u01a1i?"},b()("#rdFetch").click((function(){window.postid=new URL(b()("#rdLink").val()).pathname.split("/")[4],l="https://www.reddit.com/"+new URL(b()("#rdLink").val()).pathname.split("/")[4],b.a.get(l+".json",(function(t){l="https://www.reddit.com"+(n=t)[0].data.children[0].data.permalink,b()("#rdLink").val(l),u.a.createElement(C,null),g.a.render(u.a.createElement(C,{handleSave:S}),document.getElementById("root"))}))}));var f={};function E(t,e){b()("#save").html("Saving"),b()("#save").attr("class","btn btn-warning"),clearTimeout(d),d=setTimeout((function(){b()("#save").html("Saved&nbsp;"),b()("#save").attr("class","btn btn-success"),localStorage.setItem("traslatedContent",JSON.stringify(f)),localStorage.setItem("rdLink",l),localStorage.setItem("rdJson",JSON.stringify(n)),1==window.logined&&(window.sendPost(window.postid,window.title),window.sendJson(window.postid,JSON.stringify(n)),window.sendContent(window.postid,JSON.stringify(f)))}),1e3),f[t]=e}function S(t){}function y(t){return 999<t?(t/1e3).toFixed(1)+"k":t}b()("#save").click((function(){localStorage.setItem("traslatedContent",JSON.stringify(f)),localStorage.setItem("rdLink",l),localStorage.setItem("rdJson",JSON.stringify(n)),alert("H\xecnh nh\u01b0 l\xe0 \u0111\xe3 save")})),b()("#restore").click((function(){r=localStorage.getItem("traslatedContent"),l=localStorage.getItem("rdLink"),s=localStorage.getItem("rdJson"),b()("#rdLink").val(l),n=JSON.parse(s),g.a.render(u.a.createElement(C,{handleSave:S}),document.getElementById("root"));for(var t=JSON.parse(r),e=0,a=Object.keys(t);e<a.length;e++){var d=a[e];E(d,t[d]),b()("#"+d).text(t[d]);try{document.getElementById(d).dispatchEvent(_)}catch(o){console.log(o)}}})),b()("#restore2").click((function(){window.checkLoginState(),b.a.post("https://hphucs.me/rdex/handler.php",{fbid:window.fbid,restore:1},(function(t){var e;console.log(t),e=JSON.parse(t),r=e[0].content,l=JSON.parse(e[0].rdjson)[0].data.children[0].data.url,s=e[0].rdjson,window.postid=e[0].postid,b()("#rdLink").val(l),n=JSON.parse(s),g.a.render(u.a.createElement(C,{handleSave:S}),document.getElementById("root"));for(var a=JSON.parse(r),d=0,o=Object.keys(a);d<o.length;d++){var i=o[d];E(i,a[i]),b()("#"+i).text(a[i]);try{document.getElementById(i).dispatchEvent(_)}catch(c){console.log(c)}}}))}));var C=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).updateSubmission=function(t){n.setState({translatedSubmission:t},(function(){return n.updateAll()}))},n.updateComment=function(t,e){n.state.translatedComments[e]=t,n.updateAll()},n.updateAll=function(){for(var t=n.state.translatedSubmission,e="",a=0;a<n.state.translatedComments.length;a++)""!=n.state.translatedComments[a]&&(e+=n.state.translatedComments[a]+"____________________\r\n");n.setState({traslatedAll:t+e})},n.runRestore=function(){},n.copyResult=function(){var t=document.createElement("textarea");document.getElementById("model-body").append(t),t.value=n.state.traslatedAll,t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.getElementById("model-body").removeChild(t),alert("Text copied")},n.state={translatedSubmission:null,translatedComments:Array(),traslatedAll:null},n}return Object(i.a)(a,[{key:"render",value:function(){var t=[];if(t.push(u.a.createElement(x,{changeContent:this.updateSubmission})),"t1"==n[1].data.children[n[1].data.children.length-1].kind)for(var e=0;e<n[1].data.children.length;e++){var a=""==n[1].data.children[e].data.replies?null:n[1].data.children[e].data.replies.data.children;this.state.translatedComments=this.state.translatedComments.concat([""]),t.push(u.a.createElement(k,{body_html:n[1].data.children[e].data.body_html,author:n[1].data.children[e].data.author,score:y(n[1].data.children[e].data.score),id:n[1].data.children[e].data.id,level:1,children:a,allChildren:Array(0),order:e,changeContent:this.updateComment,awards:n[1].data.children[e].data.all_awardings}))}else for(e=0;e<n[1].data.children.length-1;e++){a=""==n[1].data.children[e].data.replies?null:n[1].data.children[e].data.replies.data.children;this.state.translatedComments=this.state.translatedComments.concat([""]),t.push(u.a.createElement(k,{body_html:n[1].data.children[e].data.body_html,author:n[1].data.children[e].data.author,score:y(n[1].data.children[e].data.score),id:n[1].data.children[e].data.id,level:1,children:a,allChildren:Array(0),order:e,changeContent:this.updateComment,awards:n[1].data.children[e].data.all_awardings}))}return u.a.createElement("div",null,u.a.createElement("button",{type:"button",class:"btn btn-primary","data-toggle":"modal","data-target":"#resultModal"},"Preview"),u.a.createElement("div",{class:"modal fade",id:"resultModal",tabindex:"-1",role:"dialog","aria-labelledby":"TranslatedResult","aria-hidden":"true"},u.a.createElement("div",{class:"modal-dialog modal-dialog-centered",role:"document"},u.a.createElement("div",{class:"modal-content"},u.a.createElement("div",{class:"modal-header"},u.a.createElement("h5",{class:"modal-title",id:"exampleModalLongTitle"},"Preview content"),u.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{id:"model-body",class:"modal-body",style:{whiteSpace:"pre-line"}},u.a.createElement("p",{id:"FinalResult"},this.state.traslatedAll)),u.a.createElement("div",{class:"modal-footer"},u.a.createElement("button",{type:"button",class:"btn btn-success",onClick:this.copyResult},"Copy text"),u.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))),t)}}]),a}(u.a.Component),x=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(t){var r;Object(o.a)(this,a),(r=e.call(this,t)).handleChange=function(){E("tasubmission",r.textarea.value);var t="r/"+r.state.subreddit+"\r\nu/"+r.state.author+"("+y(r.state.score)+" points"+r.state.awardString+") \r\n"+r.textarea.value+"\r\n____________________\r\nLink Reddit: https://redd.it/"+new URL(b()("#rdLink").val()).pathname.split("/")[4]+"\r\n____________________\r\n";r.props.changeContent(t)},window.title=n[0].data.children[0].data.title,r.state={subreddit:n[0].data.children[0].data.subreddit,author:n[0].data.children[0].data.author,selftext:n[0].data.children[0].data.selftext_html,title:n[0].data.children[0].data.title,score:y(n[0].data.children[0].data.score),translatedContent:"",awardString:""};var l=0,s=n[0].data.children[0].data.all_awardings;console.log(s);for(var d=0,i=0;i<s.length;i++)"gid_2"===s[i].id?(r.state.awardString+=" - x"+s[i].count+" gold",s[i].count>1&&(r.state.awardString+="s"),l++):"gid_3"===s[i].id?(r.state.awardString+=" - x"+s[i].count+" platinum",s[i].count>1&&(r.state.awardString+="s"),l++):"gid_1"===s[i].id?(r.state.awardString+=" - x"+s[i].count+" silver",s[i].count>1&&(r.state.awardString+="s"),l++):l<3?(r.state.awardString+=" - x"+s[i].count+" "+s[i].name,l++):d+=1;return d>0&&(r.state.awardString+=" & "+d+" more"),r}return Object(i.a)(a,[{key:"render",value:function(){var t=this;return this.state.subreddit=n[0].data.children[0].data.subreddit,this.state.author=n[0].data.children[0].data.author,this.state.selftext=n[0].data.children[0].data.selftext_html,this.state.title=n[0].data.children[0].data.title,this.state.score=y(n[0].data.children[0].data.score),this.state.translatedContent="",u.a.createElement("div",{class:"row"},u.a.createElement("div",{class:"col-md-6"},u.a.createElement("div",{className:"collapse show "+this.props.name,id:"mainBody"},u.a.createElement("div",{class:"card card-body fullrow"},u.a.createElement("p",null,u.a.createElement("b",null,"r/",this.state.subreddit),u.a.createElement("br",null),u.a.createElement("b",null,"u/",this.state.author," (",this.state.score," points",this.state.awardString,")"),u.a.createElement("br",null),this.state.title),u.a.createElement("div",{dangerouslySetInnerHTML:{__html:w(this.state.selftext)}})))),u.a.createElement("div",{class:"col-md-6"},u.a.createElement("div",{className:"collapse show "+this.props.name,id:"mainBodyTranslated"},u.a.createElement("div",{class:"card card-body fullrow"},u.a.createElement("p",{style:{height:"100%"}},u.a.createElement("b",null,"r/",this.state.subreddit),u.a.createElement("br",null),u.a.createElement("b",null,"u/",this.state.author," (",this.state.score," points",this.state.awardString,")"),u.a.createElement("br",null),u.a.createElement("textarea",{style:{height:"90%"},id:"tasubmission",onChange:this.handleChange,ref:function(e){return t.textarea=e}}),u.a.createElement("br",null))))))}}]),a}(u.a.Component),k=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(t){var n;Object(o.a)(this,a),(n=e.call(this,t)).handleChange=function(){E("ta"+n.props.id,n.textarea.value);for(var t="",e=0;e<n.state.translatedComments.length;e++)""!=n.state.translatedComments[e]&&(t+=n.state.translatedComments[e]);var a="\r\n"+n.state.prefix+"u/"+n.props.author+"("+y(n.props.score)+" points"+n.state.awardString+") \r\n"+n.textarea.value+"\r\n"+t;""===n.state.translatedComments&&(a=""),n.props.changeContent(a,n.props.order)},n.updateComment=function(t,e){var a=performance.now();n.state.translatedComments[e]=t,n.handleChange();var r=performance.now();console.log("Call to Handlechange took "+(r-a)+" milliseconds.")},n.state={allChildren:Array(0),loaded:0,prefix:"",translatedComments:Array(),awardString:""};for(var r=0,l=n.props.awards,s=0,d=0;d<l.length;d++)"gid_2"===l[d].id?(n.state.awardString+=" - x"+l[d].count+" gold",l[d].count>1&&(n.state.awardString+="s"),r++):"gid_3"===l[d].id?(n.state.awardString+=" - x"+l[d].count+" platinum",l[d].count>1&&(n.state.awardString+="s"),r++):"gid_1"===l[d].id?(n.state.awardString+=" - x"+l[d].count+" silver",l[d].count>1&&(n.state.awardString+="s"),r++):r<3?(n.state.awardString+=" - x"+l[d].count+" "+l[d].name,r++):s+=1;return s>0&&(n.state.awardString+=" & "+s+" more"),n}return Object(i.a)(a,[{key:"loadMore",value:function(t){var e=Array(0);if(t&&!this.state.loaded){var n,r=this.props.level;if(b.a.ajax({url:l+this.props.id+".json",async:!1,success:function(t){n=t}}),""!=n[1].data.children[0].data.replies)for(var s=n[1].data.children[0].data.replies.data.children,d=0;d<s.length;d++){this.state.translatedComments=this.state.translatedComments.concat([""]),"t1"==s[d].kind&&(console.log(s[d].data.all_awardings),e.push(u.a.createElement(a,{body_html:s[d].data.body_html,author:s[d].data.author,score:y(s[d].data.score),id:s[d].data.id,level:r+1,children:s[d].data.replies,order:d,changeContent:this.updateComment,awards:s[d].data.all_awardings})))}this.setState({allChildren:e}),this.setState({loaded:1})}}},{key:"render",value:function(){for(var t=this,e="",a=1;a<this.props.level;a++)e+=">";return this.state.prefix=e,u.a.createElement("div",{className:"ml-"+this.props.level},u.a.createElement("a",{class:"btn btn-light","data-toggle":"collapse","data-target":"."+this.props.id,role:"button","aria-expanded":"false","aria-controls":this.props.id,onClick:function(){return t.loadMore(t.props.children)}},u.a.createElement("b",null,e,"u/",this.props.author,"(",y(this.props.score)," points)")),u.a.createElement("div",{className:"collapse outerComments "+this.props.id,id:this.props.id},u.a.createElement("div",{className:"row"},u.a.createElement("div",{class:"col-md-6"},u.a.createElement("div",{class:"row"},u.a.createElement("div",{className:"collapse col-md-11 "+this.props.id},u.a.createElement("div",{class:" card card-body fullrow"},u.a.createElement("p",null,u.a.createElement("b",null,e,"u/",this.props.author,"(",y(this.props.score)," points",this.state.awardString,")"),u.a.createElement("br",null)),u.a.createElement("div",{dangerouslySetInnerHTML:{__html:w(this.props.body_html)}}))))),u.a.createElement("div",{class:"col-md-6"},u.a.createElement("div",{className:"collapse "+this.props.id,id:this.props.id+"Translated"},u.a.createElement("div",{class:"card card-body fullrow"},u.a.createElement("p",{style:{height:"100%"}},u.a.createElement("b",null,e,"u/",this.props.author,"(",y(this.props.score)," points",this.state.awardString,")"),u.a.createElement("br",null),u.a.createElement("textarea",{id:"ta"+this.props.id,onChange:this.handleChange,ref:function(e){return t.textarea=e}})))))),this.state.allChildren))}}]),a}(u.a.Component)}},[[8,1,2]]]);
//# sourceMappingURL=main.65f6590c.chunk.js.map